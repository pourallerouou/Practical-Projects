import{i as m}from"./index-DQYQA18e.js";import{a as f}from"./index-t--hEgTQ.js";import{_ as z,e as c,f as x,g as F,c as l,b as t,F as y,j as g,o as s,t as u}from"./index-DuqoxwSR.js";const D={class:"dashboard-container"},E={style:{height:"50vh"},class:"card"},L={class:"table-scroll-container"},C={key:0},O={key:1,class:"loading"},j={class:"card"},M={class:"table-scroll-container"},N={key:0},R={key:1,class:"loading"},S={class:"card chart-card"},U={class:"card chart-card"},V={__name:"Chart",setup(q){const n=c([]),i=c([]),h=c(null),v=c(null);let o=null,r=null;const b=async()=>{try{const e=await f.get("http://localhost:8080/select");n.value=e.data||[],w()}catch(e){console.error("渔场数据获取失败:",e)}},k=async()=>{try{const e=await f.get("http://localhost:8080/boat");i.value=e.data||[],B()}catch(e){console.error("渔船数据获取失败:",e)}},w=()=>{!h.value||!n.value.length||(o=m(h.value),o.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}吨 ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:n.value.map(e=>e.fsy_name)},series:[{name:"渔场产量",type:"pie",radius:["50%","70%"],data:n.value.map(e=>({value:e.fsy_output,name:e.fsy_name}))}]}))},B=()=>{!v.value||!i.value.length||(r=m(v.value),r.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}吨 ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:i.value.map(e=>e.boat_name)},series:[{name:"渔船捕鱼量",type:"pie",radius:["50%","70%"],data:i.value.map(e=>({value:e.boat_tonage,name:e.boat_name}))}]}))},p=()=>{o==null||o.resize(),r==null||r.resize()};return x(()=>{b(),k(),window.addEventListener("resize",p)}),F(()=>{o==null||o.dispose(),r==null||r.dispose(),window.removeEventListener("resize",p)}),(e,a)=>(s(),l("div",D,[t("div",E,[t("div",L,[a[1]||(a[1]=t("h2",null,"各渔场信息表",-1)),n.value.length?(s(),l("table",C,[a[0]||(a[0]=t("thead",null,[t("tr",null,[t("th",null,"渔场名"),t("th",null,"产量(吨)"),t("th",null,"渔场编号")])],-1)),t("tbody",null,[(s(!0),l(y,null,g(n.value,(d,_)=>(s(),l("tr",{key:"fishery-"+_},[t("td",null,u(d.fsy_name),1),t("td",null,u(d.fsy_output),1),t("td",null,u(d.fsy_id),1)]))),128))])])):(s(),l("div",O,"加载中..."))])]),t("div",j,[t("div",M,[a[3]||(a[3]=t("h2",null,"各渔船信息表",-1)),i.value.length?(s(),l("table",N,[a[2]||(a[2]=t("thead",null,[t("tr",null,[t("th",null,"渔船名"),t("th",null,"排水量")])],-1)),t("tbody",null,[(s(!0),l(y,null,g(i.value,(d,_)=>(s(),l("tr",{key:"boat-"+_},[t("td",null,u(d.boat_name),1),t("td",null,u(d.boat_tonage),1)]))),128))])])):(s(),l("div",R,"加载中..."))])]),t("div",S,[a[4]||(a[4]=t("h2",null,"各渔场产量分布",-1)),t("div",{ref_key:"fisheryChart",ref:h,class:"chart"},null,512)]),t("div",U,[a[5]||(a[5]=t("h2",null,"各渔船捕鱼量分布",-1)),t("div",{ref_key:"boatChart",ref:v,class:"chart"},null,512)])]))}},J=z(V,[["__scopeId","data-v-14992c25"]]);export{J as default};
