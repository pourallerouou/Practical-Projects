import{_ as Nt,e as d,f as Bt,n as g,g as ut,h as Pt,i as Wt,c as p,b as e,d as F,F as _,j as C,a as pt,k as Ut,t as h,w as qt,v as Qt,l as jt,m as Gt,o as v,p as vt,q as X}from"./index-DuqoxwSR.js";import{i as m,L as w}from"./index-DQYQA18e.js";/* empty css                */import{a as y}from"./index-t--hEgTQ.js";import{D as Rt,a as Zt,b as Kt,c as Xt,d as Jt,e as Yt}from"./MessCenter-yzn9gQah.js";/* empty css            *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                 *//* empty css                   *//* empty css              *//* empty css                     *//* empty css               *//* empty css              *//* empty css             */const te={class:"fishery-dashboard"},ee={class:"upper-section"},ae={class:"left-panel"},oe={class:"horizontal-container"},se={class:"card"},ne={class:"table-scroll-container"},le={class:"card"},re={class:"card",style:{width:"26vh"}},ie={class:"table-scroll-container"},ce={class:"card",style:{width:"26vh"}},de={class:"center-panel"},he={class:"card map-container"},ue={class:"centered-title"},pe={class:"current-time"},ve={class:"right-panel"},fe={class:"horizontal-container"},me={class:"card-row",style:{width:"24vh",height:"48vh"}},ye={class:"message-center"},ge={key:0,class:"message-tabs"},we={class:"tab-nav"},be=["onClick"],_e={class:"message-list"},Ce=["onClick"],Se={class:"message-avatar"},xe=["src","alt"],ke={key:0,class:"unread-badge"},ze={class:"message-info"},Fe={class:"message-header"},Ee={class:"sender-name"},De={class:"message-time"},Te={class:"message-preview"},$e={key:1,class:"chat-room"},Me={class:"chat-header"},Le={class:"chat-title"},Ve={class:"chat-messages",ref:"chatMessages"},Oe={key:0,class:"message-avatar"},He=["src","alt"],Ie={class:"message-bubble"},Ae=["innerHTML"],Ne={class:"message-time"},Be={key:1,class:"message-avatar"},Pe={class:"chat-input"},We=["onKeyup"],Ue={class:"vertical-separator"},qe={class:"card",style:{width:"28vh",height:"19vh"}},Qe={class:"table-scroll-container"},je={class:"lower-section"},Ge={class:"card"},Re={class:"table-scroll-container"},Ze={class:"horizontal-container"},Ke={class:"card-row",style:{width:"28vh"}},Xe={class:"card-row",style:{width:"29vh"}},Je={class:"card"},Ye={class:"table-scroll-container"},ta={class:"horizontal-container"},ea={class:"card-row",style:{width:"28vh"}},aa={class:"card-row",style:{width:"29vh"}},oa={class:"right-panel"},sa={class:"table-scroll-container"},na={__name:"Fishery",setup(la){const ft=d([]),mt=d([{name:"é«˜é”°é…¸é’¾",value:"1.65mg/L"},{name:"PH",value:"8.43"},{name:"æº¶è§£æ°§",value:"0.04mg/L"},{name:"æ€»æ°§",value:"0.68mg/L"},{name:"æ°´æ¸©",value:"30.19Â°C"}]);d([]);const yt=d([{category:"å°é»„é±¼",estimate:28,trend:"Northwest"},{category:"å¸¦é±¼",estimate:30,trend:"East"},{category:"é²³é±¼",estimate:70,trend:"East"}]);d([]),d([]),d([]);const J=d([]),k=d([]),f={year:2024,month:12,day:1},gt=async()=>{try{const t=(await y.get("http://localhost:8080/catch")).data;wt(t),g(()=>{Y()})}catch(o){console.error("è·å–ä»Šæ—¥æ•ææ•°æ®å¤±è´¥:",o)}},wt=o=>{const t=o.filter(s=>s.catch_year===f.year&&s.catch_month===f.month&&s.catch_day===f.day);console.log("ç­›é€‰åçš„ä»Šæ—¥æ•ææ•°æ®:",t);const a=new Map;t.forEach(s=>{const n=s.catch_fishery,r=parseFloat(s.catch_weight||0);a.has(n)?a.set(n,a.get(n)+r):a.set(n,r)}),J.value=Array.from(a.entries()).map(([s,n])=>({catch_fishery:s,catch_today:n}));const l=new Map;t.forEach(s=>{const n=s.catch_type||"å…¶ä»–",r=parseFloat(s.catch_weight||0);l.has(n)?l.set(n,l.get(n)+r):l.set(n,r)}),k.value=Array.from(l.entries()).map(([s,n])=>({name:s,value:parseFloat(n.toFixed(2))}))},Y=()=>{if(E.value){if(!k.value||k.value.length===0){console.warn("æµ·äº§å“ç±»å‹æ•°æ®ä¸ºç©º"),m(E.value).setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}});return}console.log("æ›´æ–°æµ·äº§å“ç±»å‹é¥¼å›¾ï¼Œæ•°æ®:",k.value);const o=m(E.value);o.setOption({tooltip:{trigger:"item",formatter:function(t){return`${t.name}: ${t.value.toFixed(2)}kg (${t.percent.toFixed(2)}%)`},position:function(t,a,l,s,n){return{top:t[1]-10,left:t[0]+10}},confine:!0},color:["#FF3B30","#FF9500","#FFCC00","#4CD964","#5AC8FA","#007AFF","#5856D6","#FF2D55","#8A2BE2"],series:[{name:"æµ·äº§å“æ•æé‡",type:"pie",radius:["15%","65%"],center:["50%","50%"],data:k.value,itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2},animationType:"scale",animationEasing:"elasticOut",emphasis:{itemStyle:{shadowBlur:15,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:function(t){return`${t.name}
${t.percent.toFixed(2)}%`},position:"outside",fontSize:10},labelLine:{length:3,length2:3,smooth:!0}}]}),typeof chartInstances<"u"&&chartInstances.push(o)}else console.error("æ‰¾ä¸åˆ°æµ·äº§å“ç±»å‹é¥¼å›¾å®¹å™¨")},tt=d(null),et=d(null),at=d(null),ot=d(null),st=d(null),O=d(null),E=d(null),bt=()=>{tt.value&&m(tt.value).setOption({tooltip:{trigger:"item",formatter:function(t){return`${t.seriesName} <br/>${t.name}: ${t.value.toFixed(2)} (${t.percent.toFixed(2)}%)`},position:function(t,a,l,s,n){return{top:t[1]-10,left:t[0]+10}},confine:!0},series:[{name:"æ¸”åœºäº§é‡",type:"pie",radius:"60%",data:ft.value.map(t=>({value:t.output,name:t.name}))}]}),et.value&&m(et.value).setOption({tooltip:{trigger:"axis",formatter:function(t){return`${t[0].name}<br/>${t[0].seriesName}: ${t[0].value.toFixed(2)}`},position:function(t,a,l,s,n){return{top:t[1]-10,left:t[0]+10}},confine:!0},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"æ°´è´¨æŒ‡æ•°",type:"bar",data:[120,200,150,80,70,110,130]}]}),at.value&&m(at.value).setOption({tooltip:{trigger:"axis",formatter:function(t){return`${t[0].name}<br/>${t[0].seriesName}: ${t[0].value.toFixed(2)}`},position:function(t,a,l,s,n){return{top:t[1]-10,left:t[0]+10}},confine:!0},xAxis:{type:"category",boundaryGap:!1,data:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ"]},yAxis:{type:"value"},series:[{name:"æ•é±¼é‡",type:"line",stack:"æ€»é‡",areaStyle:{},data:[120,132,101,134,90,230,210]}]}),ot.value&&m(ot.value).setOption({tooltip:{trigger:"axis",formatter:function(t){return`${t[0].name}<br/>${t[0].seriesName}: ${t[0].value.toFixed(2)}`},position:function(t,a,l,s,n){return{top:t[1]-10,left:t[0]+10}},confine:!0},xAxis:{type:"category",data:["æ™®é™€","å®šæµ·","å²±å±±","æ²ˆå®¶é—¨","æœ±å®¶å°–"]},yAxis:{type:"value"},series:[{name:"å‘¨è½¬é‡",type:"bar",data:[500,450,380,620,480]}]}),st.value&&m(st.value).setOption({tooltip:{trigger:"axis",formatter:function(t){return`${t[0].name}<br/>${t[0].seriesName}: ${t[0].value.toFixed(2)}`},position:function(t,a,l,s,n){return{top:t[1]-10,left:t[0]+10}},confine:!0},xAxis:{type:"category",data:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ"]},yAxis:{type:"value"},series:[{name:"è¿è¾“é‡",type:"line",data:[820,932,901,934,1290,1330,1320]}]}),E.value&&k.value.length>0&&Y()};let x=null;const _t=()=>{const o=document.createElement("script");o.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",o.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",o.crossOrigin="",o.async=!0,o.onload=()=>{O.value&&window.L&&(x=window.L.map(O.value).setView([29.985,122.207],10),window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}).addTo(x),[{name:"æ™®é™€æ¸”åœº",lat:29.985,lng:122.207},{name:"å®šæµ·æ¸”åœº",lat:30.015,lng:122.1},{name:"å²±å±±æ¸”åœº",lat:30.25,lng:122.2}].forEach(a=>{window.L.marker([a.lat,a.lng]).addTo(x).bindPopup(`<b>${a.name}</b>`)}),window.L.marker([29.98,122.2],{icon:window.L.divIcon({className:"boat-marker",html:"ğŸ›¥ï¸",iconSize:[24,24]})}).addTo(x).bindPopup("æµ™æ¸”001å·"))},document.head.appendChild(o)},$=d([]),H=d(null),I=d(null),Ct=async()=>{try{const o=await y.get("http://localhost:8080/todayship");$.value=o.data,console.log("ä»Šæ—¥æ¸”èˆ¹ä½œä¸šæ•°æ®:",$.value)}catch(o){console.error("è·å–ä»Šæ—¥æ¸”èˆ¹ä½œä¸šæ•°æ®å¤±è´¥:",o),$.value=[]}},A=d([]),St=async()=>{try{const t=(await y.get("http://localhost:8080/catch")).data;if(Array.isArray(t)){const a=t.filter(s=>s.catch_year===f.year&&s.catch_month===f.month&&s.catch_day===f.day);console.log("ç­›é€‰åçš„ä»Šæ—¥èˆ¹èˆ¶æ•°æ®:",a);const l=new Map;a.forEach(s=>{const n=s.catch_ship,r=s.catch_dock||"æœªçŸ¥å…¬å¸",c=parseFloat(s.catch_weight||0);if(l.has(n)){const i=l.get(n);l.set(n,{...i,catch_weight:i.catch_weight+c,ship_status:i.ship_status})}else l.set(n,{ship_id:n,ship_company:r,ship_status:"åœ¨èˆª",catch_weight:c,catch_type:s.catch_type})}),A.value=Array.from(l.values())}else console.error("è·å–çš„èˆ¹èˆ¶æ•°æ®æ ¼å¼ä¸æ­£ç¡®:",t),A.value=[];g(()=>{nt(),rt()})}catch(o){console.error("è·å–ä»Šæ—¥èˆ¹èˆ¶å›¾è¡¨æ•°æ®å¤±è´¥:",o),A.value=[],g(()=>{nt(),rt()})}},nt=()=>{if(H.value){const o=m(H.value);y.get("http://localhost:8080/catch").then(t=>{const l=t.data.filter(i=>i.catch_year===f.year&&i.catch_month===f.month&&i.catch_day===f.day),s={};l.forEach(i=>{const u=i.catch_hour||0;s[u]||(s[u]=0),s[u]+=parseFloat(i.catch_weight||0)});const n=Object.keys(s).sort((i,u)=>parseInt(i)-parseInt(u)),r=n.map(i=>s[i]),c=n.map(i=>`${i}:00`);lt(o,c,r)}).catch(t=>{console.error("è·å–æŒ‰å°æ—¶ç»Ÿè®¡æ•°æ®å¤±è´¥:",t),lt(o,[],[])})}},lt=(o,t,a)=>{if(!t||t.length===0){o.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}});return}o.setOption({tooltip:{trigger:"axis",formatter:function(l){return`${l[0].name}æ—¶<br/>æ•æé‡: ${l[0].value.toFixed(2)}kg`},position:function(l,s,n,r,c){return{top:l[1]-10,left:l[0]+10}},confine:!0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:t.map(l=>l.split(":")[0]),axisLabel:{interval:0}},yAxis:{type:"value",name:"æ•æé‡(kg)"},series:[{name:"æ•æé‡",data:a,type:"bar",itemStyle:{color:new w(0,0,0,1,[{offset:0,color:"#5470c6"},{offset:.5,color:"#91cc75"},{offset:1,color:"#fac858"}])},emphasis:{itemStyle:{color:new w(0,0,0,1,[{offset:0,color:"#ee6666"},{offset:.7,color:"#73c0de"},{offset:1,color:"#3ba272"}])}}}]}),typeof chartInstances<"u"&&!chartInstances.includes(o)&&chartInstances.push(o)},rt=()=>{if(I.value){console.log("å¼€å§‹æ›´æ–°å…¬å¸æ•æé‡é¥¼å›¾");const o=m(I.value);y.get("http://localhost:8080/catch").then(t=>{const l=t.data.filter(r=>r.catch_year===f.year&&r.catch_month===f.month&&r.catch_day===f.day),s=new Map;l.forEach(r=>{const c=r.catch_company||"å…¶ä»–æ¸”ä¸šå…¬å¸",i=parseFloat(r.catch_weight||0);s.has(c)?s.set(c,s.get(c)+i):s.set(c,i)});const n=Array.from(s.entries()).map(([r,c])=>({name:r,value:parseFloat(c.toFixed(2))}));if(console.log("å¤„ç†åçš„å…¬å¸æ•ææ•°æ®:",n),n.length===0){o.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}});return}o.setOption({tooltip:{trigger:"item",formatter:function(r){return`${r.name}: ${r.value.toFixed(2)}kg (${r.percent.toFixed(2)}%)`},position:function(r,c,i,u,V){return{top:r[1]-10,left:r[0]+10}},confine:!0},color:[new w(0,0,0,1,[{offset:0,color:"#83a4d4"},{offset:1,color:"#b6fbff"}]),new w(0,0,0,1,[{offset:0,color:"#fa709a"},{offset:1,color:"#fee140"}]),new w(0,0,0,1,[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}]),new w(0,0,0,1,[{offset:0,color:"#f5576c"},{offset:1,color:"#f093fb"}]),new w(0,0,0,1,[{offset:0,color:"#4facfe"},{offset:1,color:"#00f2fe"}]),new w(0,0,0,1,[{offset:0,color:"#43e97b"},{offset:1,color:"#38f9d7"}])],series:[{name:"å…¬å¸æ•æé‡",type:"pie",radius:["25%","65%"],center:["50%","50%"],data:n,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2},animationType:"scale",animationEasing:"elasticOut",emphasis:{itemStyle:{shadowBlur:15,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:function(r){return`${r.name}
${r.percent.toFixed(2)}%`},position:"outside",fontSize:10},labelLine:{show:!0,length:12,length2:16,smooth:!0,lineStyle:{width:1,type:"solid"}}}]}),typeof chartInstances<"u"&&!chartInstances.includes(o)&&chartInstances.push(o)}).catch(t=>{console.error("è·å–å…¬å¸æ•ææ•°æ®å¤±è´¥:",t),o.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}})})}else console.error("æ‰¾ä¸åˆ°å…¬å¸æ•æé‡é¥¼å›¾å®¹å™¨")},N=d(null),z=d([]),xt=async()=>{try{const a=(await y.get("http://localhost:8080/water")).data.filter(l=>l.water_year===f.year&&l.water_month===f.month&&l.water_day===f.day);z.value=a,console.log("ä»Šæ—¥æ°´è´¨æ•°æ®:",z.value),g(()=>{it()})}catch(o){console.error("è·å–ä»Šæ—¥æ°´è´¨æ•°æ®å¤±è´¥:",o),z.value=[],g(()=>{it()})}},it=()=>{if(N.value){console.log("æ›´æ–°ä»Šæ—¥æ°´è´¨ç»Ÿè®¡å›¾è¡¨");const o=m(N.value);if(!z.value||z.value.length===0){o.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}});return}const t={},a=["T","MN","PH","DO","TCL","HCL","temp","TN","NO2","NO3","TP","S","SS","HM","mark"];z.value.forEach(n=>{const r=n.water_hour||0;t[r]||(t[r]={count:0,T:0,MN:0,PH:0,DO:0,TCL:0,HCL:0,temp:0,TN:0,NO2:0,NO3:0,TP:0,S:0,SS:0,HM:0,mark:0}),t[r].count++,a.forEach(c=>{t[r][c]+=parseFloat(n[`water_${c}`]||0)})});const l=Object.keys(t).sort((n,r)=>parseInt(n)-parseInt(r)),s={};a.forEach(n=>{s[n]=l.map(r=>{const c=t[r];return c.count>0?(c[n]/c.count).toFixed(2):0})}),o.setOption({tooltip:{trigger:"axis",formatter:function(n){let r=`${n[0].name}æ—¶<br/>`;return n.forEach(c=>{let i=c.seriesName;r+=`${i}: ${c.value}<br/>`}),r}},grid:{left:"5%",right:"5%",bottom:"8%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:l.map(n=>n),axisLabel:{interval:2,fontSize:11,margin:8}},yAxis:{type:"value",axisLabel:{formatter:"{value}"},splitLine:{show:!0,lineStyle:{color:"#eee",type:"dashed"}}},animation:!0,animationDuration:1e3,animationEasing:"cubicOut",series:[{name:"water_T æµŠåº¦(å‚è€ƒå€¼0.1)",type:"line",data:s.T,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_MN é«˜é”°é…¸é’¾æŒ‡æ•°(å‚è€ƒå€¼1.65mg/L)",type:"line",data:s.MN,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_PH PHå€¼",type:"line",data:s.PH,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_DO æº¶è§£æ°§",type:"line",data:s.DO,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_TCL æ€»æ°¯",type:"line",data:s.TCL,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_HCL æ°¢æ°¯",type:"line",data:s.HCL,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_temp æ°´æ¸©(22åº¦)",type:"line",data:s.temp,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_TN æ€»æ°®",type:"line",data:s.TN,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_NO2 äºšç¡é…¸ç›",type:"line",data:s.NO2,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_NO3 ç¡é…¸ç›",type:"line",data:s.NO3,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_TP æ€»ç£·",type:"line",data:s.TP,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_S ç›åº¦",type:"line",data:s.S,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_SS æ‚¬æµ®ç‰©",type:"line",data:s.SS,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_HM é‡é‡‘å±",type:"line",data:s.HM,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}},{name:"water_mark æ°´è´¨åˆ†æ•°",type:"line",data:s.mark,smooth:!0,lineStyle:{width:1.5},symbol:"circle",symbolSize:4,areaStyle:{opacity:.1}}],color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#ff7f50","#87cefa","#32cd32","#9370db","#daa520","#ff69b4"]}),window.addEventListener("resize",()=>{o.resize()}),setTimeout(()=>{o.resize()},200),typeof chartInstances<"u"&&!chartInstances.includes(o)&&chartInstances.push(o)}else console.error("æ‰¾ä¸åˆ°ä»Šæ—¥æ°´è´¨ç»Ÿè®¡å›¾è¡¨å®¹å™¨")},ct=d(""),dt=()=>{const o=new Date,t=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0"),s=String(o.getHours()).padStart(2,"0"),n=String(o.getMinutes()).padStart(2,"0"),r=String(o.getSeconds()).padStart(2,"0");ct.value=`${t}-${a}-${l} ${s}:${n}:${r}`},M=d([]),kt=async()=>{try{const o=await y.get("http://localhost:8080/todaydock");M.value=o.data,console.log("ä»Šæ—¥ç å¤´å‘¨è½¬æ•°æ®:",M.value)}catch(o){console.error("è·å–ä»Šæ—¥ç å¤´å‘¨è½¬æ•°æ®å¤±è´¥:",o),M.value=[]}},b=d([]),B=d(null),P=d(null),zt=async()=>{try{let t=(await y.get("http://localhost:8080/trans")).data;b.value=t.filter(a=>a.dock_out_year===2024&&a.dock_out_month===12&&a.dock_out_day===1),console.log("ä»Šæ—¥ç å¤´æ•°æ®:",b.value),g(()=>{Ft(),Et()})}catch(o){console.error("è·å–ä»Šæ—¥ç å¤´æ•°æ®å¤±è´¥:",o),b.value=[]}},Ft=()=>{if(!B.value){console.error("æ‰¾ä¸åˆ°ç å¤´è¿è¾“é‡ç»Ÿè®¡å›¾è¡¨å®¹å™¨");return}const o=m(B.value);if(!b.value||b.value.length===0){o.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}});return}const t=new Map,a=new Map;for(let c=0;c<24;c++)a.set(c,[]);b.value.forEach(c=>{const i=c.dock_out_hour||0,u=c.dock_out_company||"å…¶ä»–";a.has(i)||a.set(i,[]),a.get(i).push(c),t.has(u)||t.set(u,[]),t.get(u).push(c)});const l=Array.from(t.keys()),s=[];l.forEach(c=>{const i=[];for(let u=0;u<24;u++){const It=(a.get(u)||[]).filter(K=>(K.dock_out_company||"å…¶ä»–")===c).reduce((K,At)=>K+Number(At.dock_out_weight||0),0);i.push(parseFloat(It.toFixed(2)))}s.push({name:c,type:"line",stack:"Total",smooth:!0,lineStyle:{width:0},showSymbol:!1,areaStyle:{opacity:.8},emphasis:{focus:"series"},data:i})});const n=Array.from({length:24},(c,i)=>`${i}æ—¶`),r=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#ff7f50"];o.setOption({color:r,title:{text:"2024å¹´12æœˆ1æ—¥",left:"center",textStyle:{fontSize:14,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:function(c){let i=`${c[0].axisValue}<br/>`,u=0;return c.forEach(V=>{const Z=parseFloat(V.value);i+=`${V.seriesName}: ${Z.toFixed(2)}å¨<br/>`,u+=Z}),i+=`<b>æ€»è®¡: ${u.toFixed(2)}å¨</b>`,i}},grid:{left:"3%",right:"4%",bottom:"3%",top:"30px",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n,axisLabel:{interval:1,fontSize:10}},yAxis:{type:"value",name:"è¿è¾“é‡(å¨)",nameTextStyle:{fontSize:10},axisLabel:{fontSize:10}},series:s}),typeof chartInstances<"u"&&!chartInstances.includes(o)&&chartInstances.push(o)},Et=()=>{if(!P.value){console.error("æ‰¾ä¸åˆ°äº§å“ç±»åˆ«å æ¯”å›¾è¡¨å®¹å™¨");return}const o=m(P.value);if(!b.value||b.value.length===0){o.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}});return}const t=new Map;b.value.forEach(s=>{const n=s.dock_out_type||"å…¶ä»–",r=parseFloat(s.dock_out_weight||0);t.has(n)?t.set(n,t.get(n)+r):t.set(n,r)});const a=Array.from(t.entries()).map(([s,n])=>({name:s,value:parseFloat(n.toFixed(2))})),l=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#ff7f50"];o.setOption({color:l,title:{text:"2024å¹´12æœˆ1æ—¥",left:"center",top:5,textStyle:{fontSize:12,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:function(s){return`${s.name}: ${s.value}å¨ (${s.percent.toFixed(1)}%)`}},series:[{name:"äº§å“ç±»åˆ«",type:"pie",radius:["15%","65%"],center:["50%","55%"],itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2},label:{formatter:`{b}
{d}%`,fontSize:10},emphasis:{label:{fontSize:12,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:a}]}),typeof chartInstances<"u"&&!chartInstances.includes(o)&&chartInstances.push(o)},L=d([]),Dt=async()=>{try{const o=await y.get("http://localhost:8080/todayfleet");L.value=o.data,console.log("ä»Šæ—¥è½¦é˜Ÿæ•°æ®:",L.value)}catch(o){console.error("è·å–ä»Šæ—¥è½¦é˜Ÿæ•°æ®å¤±è´¥:",o),L.value=[]}},Tt=()=>{g(()=>{const o=document.getElementById("fleet-transport-chart");if(!o){console.error("æ‰¾ä¸åˆ°è½¦é˜Ÿè¿è¾“é‡ç»Ÿè®¡å›¾è¡¨å®¹å™¨");return}const t=m(o);y.get("http://localhost:8080/trans").then(a=>{const s=a.data.filter(i=>i.dock_out_year===2024&&i.dock_out_month===12&&i.dock_out_day===1),n={};s.forEach(i=>{const u=i.dock_out_hour||0;n[u]||(n[u]=0),n[u]+=parseFloat(i.dock_out_weight||0)});const r=Object.keys(n).sort((i,u)=>parseInt(i)-parseInt(u)),c=r.map(i=>n[i]);t.setOption({tooltip:{trigger:"axis",formatter:function(i){return`${i[0].name}æ—¶<br/>è¿è¾“é‡: ${i[0].value.toFixed(2)}å¨`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:r.map(i=>i),axisLabel:{interval:2,formatter:"{value}"}},yAxis:{type:"value",name:"è¿è¾“é‡(å¨)"},series:[{name:"è¿è¾“é‡",type:"line",smooth:!0,data:c,lineStyle:{width:3,color:new w(0,0,0,1,[{offset:0,color:"#5470c6"},{offset:.5,color:"#91cc75"},{offset:1,color:"#fac858"}])},areaStyle:{opacity:.3,color:new w(0,0,0,1,[{offset:0,color:"rgba(84,112,198,0.3)"},{offset:1,color:"rgba(84,112,198,0.1)"}])},symbol:"circle",symbolSize:6,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}}}]}),typeof chartInstances<"u"&&!chartInstances.includes(t)&&chartInstances.push(t),window.addEventListener("resize",()=>{t.resize()})}).catch(a=>{console.error("è·å–è¿è¾“æ•°æ®å¤±è´¥:",a),t.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}})})})},$t=()=>{g(()=>{const o=document.getElementById("fleet-punctuality-chart");if(!o){console.error("æ‰¾ä¸åˆ°è½¦é˜Ÿå‡†æ—¶ç‡å›¾è¡¨å®¹å™¨");return}const t=m(o);y.get("http://localhost:8080/todayfleet").then(a=>{const l=a.data;let s=0,n=0;l.forEach(c=>{c.today_fleet_status==="æ™šç‚¹"?n++:s++});const r=s+n;r>0&&(s/r*100).toFixed(1),r>0&&(n/r*100).toFixed(1),t.setOption({tooltip:{trigger:"item",formatter:function(c){return`${c.name}: ${c.value}æ¡ (${c.percent.toFixed(1)}%)`}},legend:{orient:"vertical",left:"left",top:"center"},series:[{name:"å‡†æ—¶ç‡ç»Ÿè®¡",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:s,name:"å‡†æ—¶",itemStyle:{color:"#91cc75"}},{value:n,name:"æ™šç‚¹",itemStyle:{color:"#ee6666"}}]}]}),typeof chartInstances<"u"&&!chartInstances.includes(t)&&chartInstances.push(t),window.addEventListener("resize",()=>{t.resize()})}).catch(a=>{console.error("è·å–è½¦é˜Ÿå‡†æ—¶ç‡æ•°æ®å¤±è´¥:",a),t.setOption({title:{text:"æš‚æ— æ•°æ®",left:"center",top:"center"}})})})};Bt(()=>{g(()=>{dt();const o=setInterval(dt,1e3);console.log("å¼€å§‹åˆå§‹åŒ–å›¾è¡¨å’Œæ•°æ®..."),gt(),Ct(),St(),xt(),zt(),kt(),Dt(),bt(),_t(),setTimeout(()=>{Tt(),$t()},100),ut(()=>{clearInterval(o)})})}),ut(()=>{x&&(x.remove(),x=null);const o=document.querySelector('script[src*="leaflet"]');o&&o.remove()});const W=d(!1),U=d(!1),q=d(!1),Q=d(!1),j=d(!1),G=d(!1),D=o=>{switch(o.toLowerCase()){case"fishery":W.value=!0;break;case"water":U.value=!0;break;case"tran":q.value=!0;break;case"dock":Q.value=!0;break;case"ship":j.value=!0;break;case"mess":G.value=!0;break}},R=d("notice"),S=d(null),T=d(""),Mt=[{id:"notice",name:"ç½®é¡¶é€šçŸ¥"},{id:"hq",name:"æ€»éƒ¨æ¶ˆæ¯"},{id:"ship",name:"æ¸”èˆ¹æ¶ˆæ¯"},{id:"fleet",name:"è½¦é˜Ÿæ¶ˆæ¯"},{id:"other",name:"å…¶ä»–æ¶ˆæ¯"}],Lt=Pt({notice:[{id:"n1",sender:"ç³»ç»Ÿé€šçŸ¥",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF9500"%3E%3Cpath d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"%3E%3C/path%3E%3C/svg%3E',time:"09:30",preview:"å…³äºåŠ å¼ºæ¸”ä¸šå®‰å…¨ç”Ÿäº§çš„é‡è¦é€šçŸ¥",unread:1,type:"notice",messages:[{content:"å„å•ä½è¯·æ³¨æ„ï¼š<br>1. ä¸¥æ ¼æ‰§è¡Œå®‰å…¨ç”Ÿäº§è§„ç¨‹<br>2. åšå¥½é˜²å°é£å‡†å¤‡å·¥ä½œ<br>3. åŠæ—¶æŠ¥å‘Šå¼‚å¸¸æƒ…å†µ",time:"09:30",isSelf:!1}]},{id:"n2",sender:"æ¸”ä¸šç®¡ç†å¤„",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234CD964"%3E%3Cpath d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"%3E%3C/path%3E%3C/svg%3E',time:"10:00",preview:"æ¸”ä¸šèµ„æºä¿æŠ¤åŒºåŸŸè°ƒæ•´å…¬å‘Š",unread:0,type:"notice",messages:[{content:"æ ¹æ®æœ€æ–°è°ƒæŸ¥ç»“æœï¼Œä»¥ä¸‹åŒºåŸŸå°†åˆ’ä¸ºä¿æŠ¤åŒºï¼š<br>1. åŒ—çº¬30Â°15â€²è‡³31Â°00â€²<br>2. ä¸œç»122Â°00â€²è‡³122Â°45â€²<br>è¯·å„å•ä½ä¸¥æ ¼éµå®ˆä¿æŠ¤åŒºè§„å®šã€‚",time:"10:00",isSelf:!1}]}],hq:[{id:"h1",sender:"èˆŸå±±æ€»éƒ¨",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%235856D6"%3E%3Cpath d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"%3E%3C/path%3E%3C/svg%3E',time:"10:15",preview:"è¯·å„æ¸”èˆ¹æ³¨æ„ï¼Œä»Šæ—¥14æ—¶å°†è¿›è¡Œè”åˆå·¡æŸ¥",unread:2,type:"hq",messages:[{content:"è¯·å„æ¸”èˆ¹æ³¨æ„ï¼Œä»Šæ—¥14æ—¶å°†è¿›è¡Œè”åˆå·¡æŸ¥ï¼Œè¯·åšå¥½å‡†å¤‡ã€‚",time:"10:15",isSelf:!1}]}],ship:[{id:"s1",sender:"æµ™æ¸”01å·",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23007AFF"%3E%3Cpath d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z"%3E%3C/path%3E%3C/svg%3E',time:"11:20",preview:"å·²åˆ°è¾¾æŒ‡å®šæµ·åŸŸï¼Œå¼€å§‹ä½œä¸š",unread:0,type:"ship",messages:[{content:"å·²åˆ°è¾¾æŒ‡å®šæµ·åŸŸï¼Œå¼€å§‹ä½œä¸šã€‚",time:"11:20",isSelf:!1}]},{id:"s2",sender:"æµ™æ¸”02å·",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23007AFF"%3E%3Cpath d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z"%3E%3C/path%3E%3C/svg%3E',time:"11:45",preview:"æŠ¥å‘Šï¼šå‘ç°å¤§é‡é±¼ç¾¤ï¼Œè¯·æ±‚æ”¯æ´",unread:1,type:"ship",messages:[{content:"æŠ¥å‘Šï¼šåœ¨ä¸œç»122Â°30â€²ï¼ŒåŒ—çº¬30Â°45â€²å‘ç°å¤§é‡é±¼ç¾¤ï¼Œéœ€è¦æ”¯æ´ã€‚",time:"11:45",isSelf:!1}]},{id:"s2",sender:"æµ™æ¸”03å·",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23007AFF"%3E%3Cpath d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z"%3E%3C/path%3E%3C/svg%3E',time:"11:45",preview:"tmdæ‹–é‹æ‰æµ·é‡Œäº†ï¼Œæäº†ä¸€ä¸Šåˆ",unread:1,type:"ship",messages:[{content:"tmdæ‹–é‹æ‰æµ·é‡Œäº†ï¼Œæäº†ä¸€ä¸Šåˆ",time:"11:47",isSelf:!1}]}],fleet:[{id:"f1",sender:"è¿è¾“é˜ŸAç»„",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF3B30"%3E%3Cpath d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"%3E%3C/path%3E%3C/svg%3E',time:"12:00",preview:"è´§ç‰©å·²è£…è½½å®Œæ¯•ï¼Œå‡†å¤‡å‡ºå‘",unread:3,type:"fleet",messages:[{content:"è´§ç‰©å·²è£…è½½å®Œæ¯•ï¼Œå‡†å¤‡å‡ºå‘ã€‚",time:"12:00",isSelf:!1},{content:"é¢„è®¡30åˆ†é’Ÿååˆ°è¾¾ç›®çš„åœ°ã€‚",time:"12:05",isSelf:!1}]}],other:[{id:"o1",sender:"å¤©æ°”é¢„è­¦",avatar:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF9500"%3E%3Cpath d="M19 15h-2v-2h2v2zm-2-4V9h2v2h-2zm0 8v-2h2v2h-2zm4-12h-2V5h2v2zm0 12v-2h2v2h-2zm0-6h-2v-2h2v2zM3 5h8v8H3V5zm10 0h8v8h-8V5zm-10 10h8v8H3v-8zm10 0h8v8h-8v-8z"%3E%3C/path%3E%3C/svg%3E',time:"13:45",preview:"æœªæ¥24å°æ—¶å¯èƒ½æœ‰å¤§é£å¤©æ°”",unread:1,type:"other",messages:[{content:"æœªæ¥24å°æ—¶å¯èƒ½æœ‰å¤§é£å¤©æ°”ï¼Œè¯·å„å•ä½æ³¨æ„é˜²èŒƒã€‚<br>é£åŠ›ï¼š7-8çº§<br>é£å‘ï¼šä¸œåŒ—<br>æŒç»­æ—¶é—´ï¼šé¢„è®¡12å°æ—¶",time:"13:45",isSelf:!1}]}]}),Vt=Wt(()=>Lt[R.value]||[]),Ot=o=>{S.value=o,o.unread=0},Ht=()=>{S.value=null},ht=()=>{if(!T.value.trim())return;const o={content:T.value.replace(/\n/g,"<br>"),time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),isSelf:!0};S.value.messages.push(o),T.value="",g(()=>{const t=document.querySelector(".chat-messages");t&&(t.scrollTop=t.scrollHeight)})};return(o,t)=>(v(),p("div",te,[e("div",ee,[e("div",ae,[e("div",oe,[e("div",{class:"vertical-container",style:{height:"48vh",width:"26vh"},onClick:t[0]||(t[0]=a=>D("fishery"))},[e("div",se,[t[13]||(t[13]=e("h3",null,"ä»Šæ—¥æ•æ",-1)),e("div",ne,[e("table",null,[t[12]||(t[12]=e("thead",null,[e("tr",null,[e("th",null,"æ¸”åœºåç§°"),e("th",null,"æ•æé‡(kg)")])],-1)),e("tbody",null,[(v(!0),p(_,null,C(J.value,(a,l)=>(v(),p("tr",{key:"catch-"+l},[e("td",null,h(a.catch_fishery),1),e("td",null,h(a.catch_today.toFixed(2)),1)]))),128))])])])]),e("div",le,[t[14]||(t[14]=e("h3",null,"ä»Šæ—¥æµ·äº§å“å æ¯”",-1)),e("div",{ref_key:"catchTypePieChart",ref:E,class:"chart"},null,512)])]),e("div",{class:"vertical-container",style:{height:"48vh",width:"26vh"},onClick:t[1]||(t[1]=a=>D("water"))},[e("div",re,[t[16]||(t[16]=e("h3",null,"æ°´è´¨ä¿¡æ¯",-1)),e("div",ie,[e("table",null,[t[15]||(t[15]=e("thead",null,[e("tr",null,[e("th",null,"æ•°æ®é¡¹"),e("th",null,"å®æ—¶å€¼")])],-1)),e("tbody",null,[(v(!0),p(_,null,C(mt.value,(a,l)=>(v(),p("tr",{key:"water-"+l},[e("td",null,h(a.name),1),e("td",null,h(a.value),1)]))),128))])])])]),e("div",ce,[t[17]||(t[17]=e("h3",null,"ä»Šæ—¥æ°´è´¨ç»Ÿè®¡",-1)),e("div",{ref_key:"todayWaterQualityChart",ref:N,class:"chart"},null,512)])])])]),e("div",de,[e("div",he,[e("h3",ue,[t[18]||(t[18]=Ut("å®æ—¶åœ°å›¾ ")),e("span",pe,h(ct.value),1)]),e("div",{id:"openstreetmap",ref_key:"mapContainer",ref:O},null,512),t[19]||(t[19]=pt('<div class="map-legend" data-v-10b540c0><div data-v-10b540c0><span class="legend-icon fishery" data-v-10b540c0></span> æ¸”åœº</div><div data-v-10b540c0><span class="legend-icon boat" data-v-10b540c0></span> æ¸”èˆ¹</div><div data-v-10b540c0><span class="legend-icon fleet" data-v-10b540c0></span> è½¦é˜Ÿ</div><div data-v-10b540c0><span class="legend-icon terminal" data-v-10b540c0></span> ç å¤´</div><div data-v-10b540c0><span class="legend-icon factory" data-v-10b540c0></span> å·¥å‚</div><div data-v-10b540c0><span class="legend-icon fish" data-v-10b540c0></span> é±¼ç¾¤</div></div>',1))])]),e("div",ve,[e("div",fe,[e("div",me,[t[22]||(t[22]=e("h3",null,"è½¦èˆ¹äº’è”-æ¶ˆæ¯ä¸­å¿ƒ",-1)),e("div",ye,[S.value?(v(),p("div",$e,[e("div",Me,[e("div",{class:"back-button",onClick:Ht},t[20]||(t[20]=[e("span",null,"<",-1)])),e("div",Le,h(S.value.sender),1)]),e("div",Ve,[(v(!0),p(_,null,C(S.value.messages,(a,l)=>(v(),p("div",{key:l,class:vt(["chat-message",{"message-self":a.isSelf}])},[a.isSelf?X("",!0):(v(),p("div",Oe,[e("img",{src:S.value.avatar,alt:S.value.sender},null,8,He)])),e("div",Ie,[e("div",{class:"message-content",innerHTML:a.content},null,8,Ae),e("div",Ne,h(a.time),1)]),a.isSelf?(v(),p("div",Be,t[21]||(t[21]=[e("img",{src:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23007AFF'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/%3E%3C/svg%3E",alt:"æˆ‘"},null,-1)]))):X("",!0)],2))),128))],512),e("div",Pe,[qt(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>T.value=a),placeholder:"è¾“å…¥æ¶ˆæ¯...",onKeyup:jt(Gt(ht,["prevent"]),["enter"])},null,40,We),[[Qt,T.value]]),e("button",{onClick:ht},"å‘é€")])])):(v(),p("div",ge,[e("div",we,[(v(),p(_,null,C(Mt,a=>e("div",{key:a.id,class:vt(["tab-item",{active:R.value===a.id}]),onClick:l=>R.value=a.id},h(a.name),11,be)),64))]),e("div",_e,[(v(!0),p(_,null,C(Vt.value,a=>(v(),p("div",{key:a.id,class:"message-item",onClick:l=>Ot(a)},[e("div",Se,[e("img",{src:a.avatar,alt:a.sender},null,8,xe),a.unread?(v(),p("div",ke,h(a.unread),1)):X("",!0)]),e("div",ze,[e("div",Fe,[e("span",Ee,h(a.sender),1),e("span",De,h(a.time),1)]),e("div",Te,h(a.preview),1)])],8,Ce))),128))])]))])]),e("div",Ue,[e("div",qe,[t[24]||(t[24]=e("h3",null,"é±¼æƒ…é¢„æµ‹",-1)),e("div",Qe,[e("table",null,[t[23]||(t[23]=e("thead",null,[e("tr",null,[e("th",null,"æµ·äº§ç±»åˆ«"),e("th",null,"äº§é‡ä¼°æµ‹"),e("th",null,"ç§»åŠ¨è¶‹åŠ¿")])],-1)),e("tbody",null,[(v(!0),p(_,null,C(yt.value,(a,l)=>(v(),p("tr",{key:"fish-"+l},[e("td",null,h(a.category),1),e("td",null,h(a.estimate),1),e("td",null,h(a.trend),1)]))),128))])])])]),t[25]||(t[25]=e("div",{class:"card",style:{width:"28vh",height:"28vh"}},[e("h3",null,"å¸‚åœºé¢„æµ‹")],-1))])])])]),e("div",je,[e("div",{class:"left-panel",onClick:t[3]||(t[3]=a=>D("ship"))},[e("div",Ge,[t[27]||(t[27]=e("h3",null,"ä»Šæ—¥èˆ¹åŠ¡",-1)),e("div",Re,[e("table",null,[t[26]||(t[26]=e("thead",null,[e("tr",null,[e("th",null,"æ¸”èˆ¹ç¼–å·"),e("th",null,"æ‰€å±å…¬å¸"),e("th",null,"ä½œä¸šçŠ¶æ€"),e("th",null,"æ•æé‡")])],-1)),e("tbody",null,[(v(!0),p(_,null,C($.value,(a,l)=>(v(),p("tr",{key:"ship-"+l},[e("td",null,h(a.today_ship_id),1),e("td",null,h(a.today_ship_company),1),e("td",null,h(a.today_ship_status),1),e("td",null,h(a.today_ship_catch?a.today_ship_catch.toFixed(2):"0.00")+"kg",1)]))),128))])])])]),e("div",Ze,[e("div",Ke,[t[28]||(t[28]=e("h3",null,"æ¸”èˆ¹æ•æç»Ÿè®¡",-1)),e("div",{ref_key:"shipCaptureChart",ref:H,class:"chart"},null,512)]),e("div",Xe,[t[29]||(t[29]=e("h3",null,"æµ·äº§å“æ•ææ¯”ä¾‹",-1)),e("div",{ref_key:"productPieChart",ref:I,class:"chart"},null,512)])])]),e("div",{class:"center-panel",onClick:t[4]||(t[4]=a=>D("dock"))},[e("div",Je,[t[31]||(t[31]=e("h3",null,"ä»Šæ—¥ç å¤´",-1)),e("div",Ye,[e("table",null,[t[30]||(t[30]=e("thead",null,[e("tr",null,[e("th",null,"ç å¤´åç§°"),e("th",null,"å…¥æ¸¯é‡(å¨)"),e("th",null,"å‡ºæ¸¯é‡(å¨)"),e("th",null,"ç å¤´çŠ¶æ€")])],-1)),e("tbody",null,[(v(!0),p(_,null,C(M.value,(a,l)=>(v(),p("tr",{key:"dock-"+l},[e("td",null,h(a.today_dock_name),1),e("td",null,h(a.today_dock_input.toFixed(2)),1),e("td",null,h(a.today_dock_output.toFixed(2)),1),e("td",null,h(a.today_dock_status),1)]))),128))])])])]),e("div",ta,[e("div",ea,[t[32]||(t[32]=e("h3",null,"å„å…¬å¸å‡ºæ¸¯ç»Ÿè®¡",-1)),e("div",{ref_key:"dockTransChart",ref:B,class:"chart"},null,512)]),e("div",aa,[t[33]||(t[33]=e("h3",null,"å„ç±»äº§å“å‡ºæ¸¯é‡",-1)),e("div",{ref_key:"dockCategoryChart",ref:P,class:"chart"},null,512)])])]),e("div",oa,[e("div",{class:"card",onClick:t[5]||(t[5]=a=>D("tran"))},[t[35]||(t[35]=e("h3",null,"ä»Šæ—¥è½¦é˜Ÿ",-1)),e("div",sa,[e("table",null,[t[34]||(t[34]=e("thead",null,[e("tr",null,[e("th",null,"è½¦é˜Ÿç¼–å·"),e("th",null,"è½¦é˜Ÿåç§°"),e("th",null,"è½¦é˜ŸçŠ¶æ€"),e("th",null,"å‡†æ—¶ç‡")])],-1)),e("tbody",null,[(v(!0),p(_,null,C(L.value,(a,l)=>(v(),p("tr",{key:"fleet-"+l},[e("td",null,h(a.today_fleet_id),1),e("td",null,h(a.today_fleet_name),1),e("td",null,h(a.today_fleet_status),1),e("td",null,h(a.today_fleet_pre>0?a.today_fleet_pre.toFixed(1):"0.0"),1)]))),128))])])])]),t[36]||(t[36]=pt('<div class="horizontal-container" data-v-10b540c0><div class="card-row" style="width:28vh;" data-v-10b540c0><h3 data-v-10b540c0>è½¦é˜Ÿè¿è¾“é‡ç»Ÿè®¡</h3><div id="fleet-transport-chart" class="chart" data-v-10b540c0></div></div><div class="card-row" style="width:29vh;" data-v-10b540c0><h3 data-v-10b540c0>è½¦é˜Ÿå‡†æ—¶ç‡</h3><div id="fleet-punctuality-chart" class="chart" data-v-10b540c0></div></div></div>',1))])]),F(Rt,{modelValue:W.value,"onUpdate:modelValue":t[6]||(t[6]=a=>W.value=a)},null,8,["modelValue"]),F(Zt,{modelValue:U.value,"onUpdate:modelValue":t[7]||(t[7]=a=>U.value=a)},null,8,["modelValue"]),F(Kt,{modelValue:q.value,"onUpdate:modelValue":t[8]||(t[8]=a=>q.value=a)},null,8,["modelValue"]),F(Xt,{modelValue:Q.value,"onUpdate:modelValue":t[9]||(t[9]=a=>Q.value=a)},null,8,["modelValue"]),F(Jt,{modelValue:j.value,"onUpdate:modelValue":t[10]||(t[10]=a=>j.value=a)},null,8,["modelValue"]),F(Yt,{modelValue:G.value,"onUpdate:modelValue":t[11]||(t[11]=a=>G.value=a)},null,8,["modelValue"])]))}},xa=Nt(na,[["__scopeId","data-v-10b540c0"]]);export{xa as default};
