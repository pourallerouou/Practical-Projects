/* empty css            *//* empty css                *//* empty css                 *//* empty css                   *//* empty css               *//* empty css               *//* empty css              *//* empty css                     */import{a as j}from"./index-t--hEgTQ.js";import{_ as q,e as i,h as F,L as I,f as R,i as W,c as f,b as n,t as c,d as a,s as o,M as S,N as G,o as m,F as z,j as N,y as E,O as J,x as K,z as X,q as Y,w as Z,A as ee,B as ae,k as M,p as k,P as te,Q as le,R as re}from"./index-DuqoxwSR.js";/* empty css                   */const ne={class:"page-container"},oe={class:"content-area"},se={class:"title-container"},ie={class:"page-title"},de={class:"sub-tabs-container"},ue={class:"data-source-container"},ce={class:"sub-tab-content"},me={key:0,class:"water-quality-table"},pe={class:"pagination-container"},be={class:"main-tabs-container"},_e=40,we=20,he={__name:"DataPage",setup(ve){const g=[{name:"fishery",label:"渔场数据",title:"渔场数据采集中心",subTabs:[{name:"fishery-1",label:"水质数据"},{name:"fishery-2",label:"天气数据"},{name:"fishery-3",label:"生物状态数据"},{name:"fishery-4",label:"设备状态数据"},{name:"fishery-5",label:"员工状态数据"}]},{name:"ship",label:"渔船数据",title:"渔船数据采集中心",subTabs:[{name:"ship-1",label:"渔船行驶数据"},{name:"ship-2",label:"渔船气象数据"},{name:"ship-3",label:"渔具状态数据"},{name:"ship-4",label:"动力系统数据"},{name:"ship-5",label:"捕捞日志"},{name:"ship-6",label:"船员状态数据"}]},{name:"dock",label:"码头数据",title:"码头数据采集中心",subTabs:[{name:"dock-1",label:"停泊离港数据"},{name:"dock-2",label:"货物装卸数据"},{name:"dock-3",label:"货物仓储数据"},{name:"dock-4",label:"设备状态数据"},{name:"dock-5",label:"工人状态数据"}]},{name:"fleet",label:"车队数据",title:"车队数据采集中心",subTabs:[{name:"fleet-1",label:"车辆行驶数据"},{name:"fleet-2",label:"动力系统数据"},{name:"fleet-3",label:"运输日志"},{name:"fleet-4",label:"货物状态数据"},{name:"fleet-5",label:"驾驶员状态数据"}]},{name:"warehouse",label:"仓库数据",title:"仓库数据采集中心",subTabs:[{name:"warehouse-1",label:"仓储数据"},{name:"warehouse-2",label:"出入库记录"},{name:"warehouse-3",label:"设备状态数据"}]},{name:"workshop",label:"车间数据",title:"车间数据采集中心",subTabs:[{name:"workshop-1",label:"设备状态数据"},{name:"workshop-2",label:"生产日志"},{name:"workshop-3",label:"工人状态数据"}]},{name:"market",label:"市场销售数据",title:"市场销售数据采集中心",subTabs:[{name:"market-1",label:"销售订单记录"},{name:"market-2",label:"舆情数据"}]},{name:"fish",label:"鱼群监测数据",title:"鱼群监测数据采集中心",subTabs:[{name:"fish-1",label:"鱼群位置数据"}]}],_=i("fishery"),p=i("fishery-1"),T=F({}),d=i([]),b=i(1),w=i(20),u=i(0),h=i(!1),P=i(!0),v=async()=>{h.value=!0;try{setTimeout(async()=>{try{const e=await j.get("http://localhost:8080/selectwater",{params:{page:b.value,size:w.value}});e.data&&Array.isArray(e.data)?(d.value=e.data,u.value=e.data.length):e.data&&e.data.records?(d.value=e.data.records,u.value=e.data.total||e.data.records.length):(d.value=[],u.value=0,console.warn("Unexpected data format:",e.data))}catch(e){console.error("获取水质数据失败:",e),S.error("获取水质数据失败"),d.value=[],u.value=0}finally{h.value=!1}},100)}catch(e){console.error("获取水质数据失败:",e),S.error("获取水质数据失败"),d.value=[],u.value=0,h.value=!1}},D=e=>{w.value=e,b.value=1,v()},L=e=>{b.value=e,v()},U=e=>e>=90?"success":e>=70?"":e>=60?"warning":"danger";I(p,e=>{e==="fishery-1"&&v()},{immediate:!0}),R(()=>{p.value==="fishery-1"&&v()});const x=W(()=>g.find(e=>e.name===_.value)),B=()=>{const e=g.find(s=>s.name===_.value);e&&e.subTabs.length>0&&(p.value=e.subTabs[0].name)};return(e,s)=>{const y=X,H=K,l=ae,O=te,Q=ee,$=re,C=J,V=G,A=le;return m(),f("div",ne,[n("div",oe,[n("div",se,[n("h2",ie,c(x.value.title),1)]),n("div",de,[a(V,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=r=>p.value=r),type:"card"},{default:o(()=>[(m(!0),f(z,null,N(x.value.subTabs,r=>(m(),E(C,{key:r.name,label:r.label,name:r.name},{default:o(()=>[n("div",ue,[a(H,{modelValue:T[r.name],"onUpdate:modelValue":t=>T[r.name]=t,placeholder:"数据源",clearable:"",class:"data-source-select"},{default:o(()=>[a(y,{label:"硬件采集",value:"hardware"}),a(y,{label:"手动导入",value:"manual"}),a(y,{label:"第三方数据源",value:"third-party"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),n("div",ce,[r.name==="fishery-1"?(m(),f("div",me,[Z((m(),E(Q,{data:d.value,style:{width:"100%"},height:"calc(100vh - 300px)",border:"","element-loading-text":"加载中...","row-key":t=>t.id,"default-sort":{prop:"id",order:"descending"},"max-height":500,"virtual-scroll":P.value,"row-height":_e,"visible-rows":we},{default:o(()=>[a(l,{prop:"id",label:"ID",width:"80"}),a(l,{prop:"water_fishery",label:"采样渔场",width:"120"}),a(l,{label:"采样时间",width:"200"},{default:o(t=>[M(c(`${t.row.water_year}-${t.row.water_month}-${t.row.water_day} ${t.row.water_hour}:00`),1)]),_:1}),a(l,{prop:"water_T",label:"浊度",width:"100"},{default:o(t=>[n("span",{class:k({"warning-text":t.row.water_T>.1})},c(t.row.water_T),3)]),_:1}),a(l,{prop:"water_MN",label:"高锰酸钾指数(mg/L)",width:"160"},{default:o(t=>[n("span",{class:k({"warning-text":t.row.water_MN>1.65})},c(t.row.water_MN),3)]),_:1}),a(l,{prop:"water_PH",label:"PH值",width:"100"}),a(l,{prop:"water_DO",label:"溶解氧",width:"100"}),a(l,{prop:"water_TCL",label:"总氯",width:"100"}),a(l,{prop:"water_HCL",label:"氢氯",width:"100"}),a(l,{prop:"water_temp",label:"水温(℃)",width:"120"},{default:o(t=>[n("span",{class:k({"warning-text":Math.abs(t.row.water_temp-22)>2})},c(t.row.water_temp),3)]),_:1}),a(l,{prop:"water_TN",label:"总氮",width:"100"}),a(l,{prop:"water_NO2",label:"亚硝酸盐",width:"120"}),a(l,{prop:"water_NO3",label:"硝酸盐",width:"100"}),a(l,{prop:"water_TP",label:"总磷",width:"100"}),a(l,{prop:"water_S",label:"盐度",width:"100"}),a(l,{prop:"water_SS",label:"悬浮物",width:"100"}),a(l,{prop:"water_HM",label:"重金属",width:"100"}),a(l,{prop:"water_mark",label:"水质分数",width:"100"},{default:o(t=>[a(O,{type:U(t.row.water_mark)},{default:o(()=>[M(c(t.row.water_mark),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data","row-key","virtual-scroll"])),[[A,h.value]]),n("div",pe,[a($,{"current-page":b.value,"onUpdate:currentPage":s[0]||(s[0]=t=>b.value=t),"page-size":w.value,"onUpdate:pageSize":s[1]||(s[1]=t=>w.value=t),"page-sizes":[10,20,50,100],total:u.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:D,onCurrentChange:L},null,8,["current-page","page-size","total"])])])):Y("",!0)])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])]),n("div",be,[a(V,{modelValue:_.value,"onUpdate:modelValue":s[3]||(s[3]=r=>_.value=r),onTabClick:B},{default:o(()=>[(m(),f(z,null,N(g,r=>a(C,{key:r.name,label:r.label,name:r.name},null,8,["label","name"])),64))]),_:1},8,["modelValue"])])])}}},Ee=q(he,[["__scopeId","data-v-30f3ca44"]]);export{Ee as default};
