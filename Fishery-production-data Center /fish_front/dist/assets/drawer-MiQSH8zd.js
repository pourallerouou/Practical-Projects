/* empty css            *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                     *//* empty css                     */import{i as D}from"./index-DQYQA18e.js";import{_,c as k,b as i,d as a,s as p,G as x,o as u,H as V,k as m,A as v,B as T,y,q as c,I as M,J as E,K as R}from"./index-DuqoxwSR.js";const q={data(){return{showDrawer:!1,drawerWidth:"80%",timeRange:"month",selectedDate:new Date,selectedWeek:new Date,selectedMonth:new Date,selectedYear:new Date,fisheryInfo:[{name:"东海渔场",location:"中国东海海域",area:"1200",fishTypes:"带鱼、黄鱼、鲳鱼、墨鱼",manager:"张大海",contact:"13800138001"}],fishingData:[],fishingChart:null}},mounted(){this.generateFishingData(),this.$nextTick(()=>{this.initChart()})},beforeDestroy(){this.fishingChart&&this.fishingChart.dispose()},methods:{closeDrawer(){this.showDrawer=!1},generateFishingData(){const s=["带鱼","黄鱼","鲳鱼","墨鱼"],e=[];for(let d=1;d<=30;d++){const o=s[Math.floor(Math.random()*s.length)];e.push({date:`2023-05-${d<10?"0"+d:d}`,fishType:o,quantity:Math.floor(Math.random()*1e3)+500,value:Math.floor(Math.random()*5e3)+2e3,boatCount:Math.floor(Math.random()*10)+5,fishermanCount:Math.floor(Math.random()*50)+20})}this.fishingData=e},initChart(){this.fishingChart=D(document.getElementById("fishingChart")),this.updateChart()},updateChart(){if(!this.fishingChart)return;let s=[];const e=["带鱼","黄鱼","鲳鱼","墨鱼"];this.timeRange==="day"?s=this.fishingData.filter(o=>o.date===this.formatDate(this.selectedDate)).reduce((o,t)=>{const l=o.find(r=>r.fishType===t.fishType);return l?(l.quantity+=t.quantity,l.value+=t.value):o.push({...t}),o},[]):e.forEach(o=>{const l=this.fishingData.filter(r=>r.fishType===o).reduce((r,n)=>r+n.quantity,0);s.push({fishType:o,quantity:l})});const d={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:e},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:this.timeRange==="day"?["各鱼种"]:s.map(o=>o.fishType)},yAxis:{type:"value",name:"数量(公斤)"},series:e.map(o=>{var t,l;return{name:o,type:"bar",data:this.timeRange==="day"?[((t=s.find(r=>r.fishType===o))==null?void 0:t.quantity)||0]:[((l=s.find(r=>r.fishType===o))==null?void 0:l.quantity)||0],itemStyle:{color:this.getFishColor(o)}}})};this.fishingChart.setOption(d)},formatDate(s){if(!s)return"";const e=new Date(s),d=""+(e.getMonth()+1),o=""+e.getDate();return[e.getFullYear(),d.padStart(2,"0"),o.padStart(2,"0")].join("-")},getFishColor(s){return{带鱼:"#5470C6",黄鱼:"#91CC75",鲳鱼:"#FAC858",墨鱼:"#EE6666"}[s]||"#73C0DE"}}},B={slot:"title",class:"drawer-header"},W={class:"drawer-content",ref:"drawerContent"},F={class:"section"},I={class:"section"},U={class:"stat-controls"};function A(s,e,d,o,t,l){const r=V,n=T,C=v,f=E,w=M,g=R,b=x;return u(),k("div",null,[i("a",{onClick:e[0]||(e[0]=h=>t.showDrawer=!0),class:"drawer-trigger"},"查看渔场详情"),a(b,{title:"渔场详细信息",visible:t.showDrawer,direction:"ltr",size:t.drawerWidth,wrapperClosable:!1,"custom-class":"fishery-drawer"},{default:p(()=>[i("div",B,[e[7]||(e[7]=i("span",{class:"drawer-title"},"渔场详细信息",-1)),a(r,{type:"text",onClick:l.closeDrawer,class:"close-btn"},{default:p(()=>e[6]||(e[6]=[i("i",{class:"el-icon-close"},null,-1),m(" 关闭 ")])),_:1},8,["onClick"])]),i("div",W,[i("div",F,[e[8]||(e[8]=i("h3",{class:"section-title"},"渔场基本信息",-1)),a(C,{data:t.fisheryInfo,border:"",style:{width:"100%"}},{default:p(()=>[a(n,{prop:"name",label:"渔场名称",width:"150"}),a(n,{prop:"location",label:"地理位置"}),a(n,{prop:"area",label:"面积(平方公里)",width:"120"}),a(n,{prop:"fishTypes",label:"主要鱼种"}),a(n,{prop:"manager",label:"负责人",width:"120"}),a(n,{prop:"contact",label:"联系方式",width:"150"})]),_:1},8,["data"])]),i("div",I,[e[13]||(e[13]=i("h3",{class:"section-title"},"捕鱼量统计",-1)),i("div",U,[a(w,{modelValue:t.timeRange,"onUpdate:modelValue":e[1]||(e[1]=h=>t.timeRange=h),onChange:l.updateChart},{default:p(()=>[a(f,{label:"day"},{default:p(()=>e[9]||(e[9]=[m("日统计")])),_:1}),a(f,{label:"week"},{default:p(()=>e[10]||(e[10]=[m("周统计")])),_:1}),a(f,{label:"month"},{default:p(()=>e[11]||(e[11]=[m("月统计")])),_:1}),a(f,{label:"year"},{default:p(()=>e[12]||(e[12]=[m("年统计")])),_:1})]),_:1},8,["modelValue","onChange"]),t.timeRange==="day"?(u(),y(g,{key:0,modelValue:t.selectedDate,"onUpdate:modelValue":e[2]||(e[2]=h=>t.selectedDate=h),type:"date",placeholder:"选择日期",style:{"margin-left":"15px"},onChange:l.updateChart},null,8,["modelValue","onChange"])):c("",!0),t.timeRange==="week"?(u(),y(g,{key:1,modelValue:t.selectedWeek,"onUpdate:modelValue":e[3]||(e[3]=h=>t.selectedWeek=h),type:"week",format:"yyyy 第 WW 周",placeholder:"选择周",style:{"margin-left":"15px"},onChange:l.updateChart},null,8,["modelValue","onChange"])):c("",!0),t.timeRange==="month"?(u(),y(g,{key:2,modelValue:t.selectedMonth,"onUpdate:modelValue":e[4]||(e[4]=h=>t.selectedMonth=h),type:"month",placeholder:"选择月份",style:{"margin-left":"15px"},onChange:l.updateChart},null,8,["modelValue","onChange"])):c("",!0),t.timeRange==="year"?(u(),y(g,{key:3,modelValue:t.selectedYear,"onUpdate:modelValue":e[5]||(e[5]=h=>t.selectedYear=h),type:"year",placeholder:"选择年份",style:{"margin-left":"15px"},onChange:l.updateChart},null,8,["modelValue","onChange"])):c("",!0)]),a(C,{data:t.fishingData,border:"",style:{width:"100%","margin-top":"15px"}},{default:p(()=>[a(n,{prop:"date",label:"日期",width:"120"}),a(n,{prop:"fishType",label:"鱼种",width:"120"}),a(n,{prop:"quantity",label:"数量(公斤)",width:"120"}),a(n,{prop:"value",label:"价值(元)",width:"120"}),a(n,{prop:"boatCount",label:"渔船数量",width:"100"}),a(n,{prop:"fishermanCount",label:"渔民数量",width:"100"})]),_:1},8,["data"])]),e[14]||(e[14]=i("div",{class:"section"},[i("h3",{class:"section-title"},"捕鱼量统计图表"),i("div",{class:"chart-container"},[i("div",{id:"fishingChart",style:{width:"100%",height:"400px"}})])],-1))],512)]),_:1},8,["visible","size"])])}const K=_(q,[["render",A],["__scopeId","data-v-b30ecbae"]]);export{K as default};
